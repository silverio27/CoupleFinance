<div class="content">
  <div class="header">
    <span>Categorias</span>
    <span class="spacer"></span>
    <button
      mat-raised-button
      cdkOverlayOrigin
      #trigger="cdkOverlayOrigin"
      (click)="showAddCategory = true"
    >
      Novo
    </button>
    <ng-template
      cdkConnectedOverlay
      [cdkConnectedOverlayOrigin]="trigger"
      [cdkConnectedOverlayOpen]="showAddCategory"
    >
      <div class="new-category mat-elevation-z4">
        <div class="header">
          <button mat-icon-button (click)="showAddCategory = false">
            <mat-icon>close</mat-icon>
          </button>
        </div>
        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label>Descrição</mat-label>
          <input matInput [(ngModel)]="newCategory.description" name="description" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Cor</mat-label>
          <input matInput aria-label="State" [matAutocomplete]="auto" [(ngModel)]="newCategory.color" name="color" />
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let color of colors"
              [value]="color"
              
            >
              <img class="circle" [style.backgroundColor]="color" />

              <span>{{color}}</span> |
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Ícone</mat-label>
          <input
            matInput
            aria-label="State"
            [matAutocomplete]="icone"
            [formControl]="iconControl"
            [(ngModel)]="newCategory.icon"
            (ngModelChange)="updatePreview()"
            name="icon"
          />
          <mat-autocomplete #icone="matAutocomplete">
            <mat-option
              *ngFor="let icon of filteredOptions | async"
              [value]="icon"
              
            >
              <mat-icon>{{icon}}</mat-icon>

              <span>{{icon}}</span>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <span>Pré visualização</span>
        <div class="preview">
          <cf-category-presents
            [value]="preview"
          ></cf-category-presents>
        </div>

        <button mat-raised-button (click)="save()">Salvar</button>
      </div>
    </ng-template>
  </div>
  <mat-list>
    <mat-list-item *ngFor="let item of categories">
      <span>
        <input type="text" [(ngModel)]="item.description" />
      </span>
      <button mat-icon-button color="warn"><mat-icon>delete</mat-icon></button>
    </mat-list-item>
  </mat-list>
</div>
